二叉查找树(BST)是一棵二叉树，它的左子节点的值比父节点的值要小，右节点的值要比父节点的值大。它的高度决定了它的查找效率。

- **左**子树上所有结点的值均**小于或等于**它的根结点的值。

- **右**子树上所有结点的值均**大于或等于**它的根结点的值。

- 左、右子树也分别为二叉排序树。

### BST存在的问题

BST存在的主要问题是，数在插入的时候会导致树倾斜，不同的插入顺序会导致树的高度不一样，而树的高度直接的影响了树的查找效率。理想的高度是logN，最坏的情况是所有的节点都在一条斜线上，这样的树的高度为N。

### 红黑树:

5个规则:

- 每个结点或是红色的，或是黑色的 - 
- 根节点是黑色的 
- 每个叶结点（NIL）是黑色的 
- 如果一个节点是红色的，则它的两个儿子都是黑色的。 
- 对于每个结点，从该结点到其叶子结点构成的所有路径上的黑结点个数相同。

数据结构表:

```java
class  Node<T>{
   public  T value;
   public   Node<T> parent;
   public   boolean isRed;
   public   Node<T> left;
   public   Node<T> right;
}
```

### RBTree的查找操作

同BST相同

### RBTree的插入操作

需要对树进行旋转操作和颜色修复（在这里简称插入修复），使得它符合RBTree的定义。

新插入的节点是红色的，插入修复操作如果遇到父节点的颜色为黑则修复操作结束。也就是说，只有在父节点为红色节点的时候是需要插入修复操作的。

插入修复操作分为以下的三种情况，而且新插入的节点的父节点都是红色的：

- 叔叔节点也为红色。

- 叔叔节点为空，且祖父节点、父节点和新节点处于一条斜线上。

- 叔叔节点为空，且祖父节点、父节点和新节点不处于一条斜线上。

CASE1:

将父亲节点和叔叔节点的颜色和爷爷进行互换

CASE2:

若全在左节点,则将父亲右旋并将其和祖父节点进行换色;相似的,若全在右节点,则将父亲左旋,改变颜色

CASE3:

若子节点和父亲节点不在同一根线,此时可以先将子节点进行选择到同一根线,此时会变成CASE2的情况,再进行操作

RB树的插入操作,是一个往root节点进行回溯,检测到不符合5定义的情况,便要进行修复,直到root节点全部节点都符合定义为止.



- 1、如果我们添加的【红色节点】的【父节点】是黑色，那么树不需要做调整。
- 2、如果我们添加的【红色节点】的【父节点】是红色，那么树需要做调整。
  - 1）、父节点是红色，叔叔节点（父节点的兄弟节点）是红色的。
  - 2）、父节点是红色，叔叔节点是黑色，添加的节点是父节点的左孩子。
  - 3）、父节点是红色，叔叔节点是黑色，添加的节点是父节点的右孩子。